{
  "name": "ci-cd-pipeline-app",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "test": "jest",
    "test:ci": "jest --ci --coverage --reporters=default --reporters=jest-junit",
    "docker:build": "docker build -t cicd-sample-app:local .",
    "docker:run": "powershell -NoProfile -Command \"$ErrorActionPreference='SilentlyContinue'; docker rm -f cicd-sample-app; docker run -d --name cicd-sample-app -p 3001:3000 cicd-sample-app:local\"",
    "docker:stop": "powershell -NoProfile -Command \"$ErrorActionPreference='SilentlyContinue'; docker stop cicd-sample-app; docker rm cicd-sample-app\"",
    "docker:logs": "docker logs -f cicd-sample-app",
    "docker:health": "powershell -NoProfile -Command \"$i=0; while($i -lt 30){ try { $r = iwr -UseBasicParsing http://localhost:3001/api/health -TimeoutSec 2; if ($r.StatusCode -eq 200) { exit 0 } } catch {} start-sleep -Seconds 2; $i++ } exit 1\"",
    "start:docker": "npm run docker:build && npm run docker:run && npm run docker:health"
  },
  "dependencies": {
    "express": "^4.18.2"
  },
  "devDependencies": {
    "jest": "^29.7.0",
    "supertest": "^6.3.3",
    "jest-junit": "^16.0.0"
  },
  "jest-junit": {
    "outputDirectory": "test-results",
    "outputName": "junit.xml"
  },
  "jest": {
    "testEnvironment": "node"
  }
}